"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645],{51991:function(e,t,r){r.d(t,{P:function(){return a}});var i=r(77191),n=r(85893),a=function(e){return(0,i.Z)(e),(0,n.jsxs)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"fill-black dark:fill-white",children:[(0,n.jsx)("path",{d:"M29.4388 26.8227C29.5803 26.9642 29.7606 27.0606 29.9569 27.0996C30.1531 27.1386 30.3566 27.1186 30.5415 27.042C30.7263 26.9654 30.8843 26.8358 30.9955 26.6694C31.1067 26.503 31.1661 26.3074 31.1661 26.1073V7.89304C31.1661 7.69293 31.1067 7.49733 30.9955 7.33097C30.8843 7.1646 30.7263 7.03493 30.5415 6.95836C30.3566 6.88179 30.1531 6.86175 29.9569 6.90078C29.7606 6.93981 29.5803 7.03615 29.4388 7.17762L20.3317 16.2848C20.2377 16.3787 20.1631 16.4902 20.1122 16.613C20.0613 16.7357 20.0352 16.8673 20.0352 17.0002C20.0352 17.1331 20.0613 17.2646 20.1122 17.3874C20.1631 17.5102 20.2377 17.6217 20.3317 17.7156L29.4388 26.8227ZM29.1423 10.3359V23.6645L22.478 17.0002L29.1423 10.3359Z"}),(0,n.jsx)("path",{d:"M18.0121 3.8454C18.0121 3.57703 17.9055 3.31965 17.7157 3.12988C17.5259 2.94011 17.2686 2.8335 17.0002 2.8335C16.7318 2.8335 16.4744 2.94011 16.2847 3.12988C16.0949 3.31965 15.9883 3.57703 15.9883 3.8454V5.86921C15.9883 6.13758 16.0949 6.39497 16.2847 6.58473C16.4744 6.7745 16.7318 6.88111 17.0002 6.88111C17.2686 6.88111 17.5259 6.7745 17.7157 6.58473C17.9055 6.39497 18.0121 6.13758 18.0121 5.86921V3.8454Z"}),(0,n.jsx)("path",{d:"M18.0121 15.9885C18.0121 15.7201 17.9055 15.4627 17.7157 15.2729C17.5259 15.0832 17.2686 14.9766 17.0002 14.9766C16.7318 14.9766 16.4744 15.0832 16.2847 15.2729C16.0949 15.4627 15.9883 15.7201 15.9883 15.9885V18.0123C15.9883 18.2807 16.0949 18.538 16.2847 18.7278C16.4744 18.9176 16.7318 19.0242 17.0002 19.0242C17.2686 19.0242 17.5259 18.9176 17.7157 18.7278C17.9055 18.538 18.0121 18.2807 18.0121 18.0123V15.9885Z"}),(0,n.jsx)("path",{d:"M18.0121 22.0598C18.0121 21.7914 17.9055 21.534 17.7157 21.3442C17.5259 21.1545 17.2686 21.0479 17.0002 21.0479C16.7318 21.0479 16.4744 21.1545 16.2847 21.3442C16.0949 21.534 15.9883 21.7914 15.9883 22.0598V24.0836C15.9883 24.3519 16.0949 24.6093 16.2847 24.7991C16.4744 24.9889 16.7318 25.0955 17.0002 25.0955C17.2686 25.0955 17.5259 24.9889 17.7157 24.7991C17.9055 24.6093 18.0121 24.3519 18.0121 24.0836V22.0598Z"}),(0,n.jsx)("path",{d:"M17.0002 27.1191C16.7318 27.1191 16.4744 27.2258 16.2847 27.4155C16.0949 27.6053 15.9883 27.8627 15.9883 28.131V30.1549C15.9883 30.4232 16.0949 30.6806 16.2847 30.8704C16.4744 31.0602 16.7318 31.1668 17.0002 31.1668C17.2686 31.1668 17.5259 31.0602 17.7157 30.8704C17.9055 30.6806 18.0121 30.4232 18.0121 30.1549V28.131C18.0121 27.8627 17.9055 27.6053 17.7157 27.4155C17.5259 27.2258 17.2686 27.1191 17.0002 27.1191Z"}),(0,n.jsx)("path",{d:"M18.0121 9.91669C18.0121 9.64832 17.9055 9.39093 17.7157 9.20117C17.5259 9.0114 17.2686 8.90479 17.0002 8.90479C16.7318 8.90479 16.4744 9.0114 16.2847 9.20117C16.0949 9.39093 15.9883 9.64832 15.9883 9.91669V11.9405C15.9883 12.2089 16.0949 12.4663 16.2847 12.656C16.4744 12.8458 16.7318 12.9524 17.0002 12.9524C17.2686 12.9524 17.5259 12.8458 17.7157 12.656C17.9055 12.4663 18.0121 12.2089 18.0121 11.9405V9.91669Z"}),(0,n.jsx)("path",{d:"M3.45756 27.0418C3.64247 27.1185 3.846 27.1386 4.04235 27.0996C4.2387 27.0605 4.41904 26.9641 4.56053 26.8225L13.6677 17.7153C13.7617 17.6214 13.8362 17.5099 13.8871 17.3871C13.938 17.2644 13.9642 17.1328 13.9642 16.9999C13.9642 16.867 13.938 16.7354 13.8871 16.6127C13.8362 16.4899 13.7617 16.3784 13.6677 16.2845L4.56053 7.17733C4.41903 7.03579 4.23872 6.93939 4.04243 6.90032C3.84613 6.86126 3.64266 6.88128 3.45774 6.95786C3.27282 7.03444 3.11477 7.16413 3.00357 7.33054C2.89237 7.49695 2.83301 7.6926 2.83301 7.89275V26.107C2.83301 26.3071 2.89235 26.5028 3.00352 26.6691C3.11468 26.8355 3.27269 26.9652 3.45756 27.0418Z"})]})}},38813:function(e,t,r){r.d(t,{a:function(){return a}});var i=r(57851),n=r(85893),a=function(e){var t=e.height,r=e.width,a=e.className,o=null!==t&&void 0!==t?t:124,c=null!==r&&void 0!==r?r:124;return(0,n.jsxs)("svg",{width:c,height:o,viewBox:"0 0 124 124",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,i.m)("animate-spin stroke-irGray-600 dark:stroke-white",a),children:[(0,n.jsx)("path",{d:"M68.3691 106.127C50.2623 108.732 31.6537 99.9449 22.6068 82.8604C11.0939 61.1191 19.3987 34.1192 41.1401 22.6063C47.1813 19.4073 53.6278 17.7384 60.0366 17.4622",strokeWidth:"22",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M48.2306 104.387C37.5987 100.934 28.2455 93.5087 22.6069 82.8605C11.094 61.1191 19.3988 34.1193 41.1401 22.6064C47.1814 19.4073 53.6279 17.7385 60.0367 17.4623",strokeWidth:"23",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M30.774 93.8227C27.5811 90.6907 24.8101 87.022 22.6064 82.8604C11.0935 61.1191 19.3983 34.1192 41.1396 22.6063C47.1809 19.4073 53.6274 17.7385 60.0362 17.4622",strokeWidth:"24",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M19.8691 76.575C12.7829 56.1563 21.453 33.0314 41.1402 22.6064C47.1814 19.4073 53.6279 17.7385 60.0367 17.4622",strokeWidth:"25",strokeLinecap:"round",strokeLinejoin:"round"})]})}},72520:function(e,t,r){r.d(t,{V:function(){return a}});var i=r(77191),n=r(85893),a=function(e){return(0,i.Z)(e),(0,n.jsx)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"fill-black dark:fill-white",children:(0,n.jsx)("path",{d:"M17 2C20.9502 2.00334 24.7383 3.57127 27.5354 6.36071V3.49732C27.5354 3.21316 27.6482 2.94064 27.8492 2.73971C28.0501 2.53878 28.3226 2.42589 28.6068 2.42589C28.8909 2.42589 29.1635 2.53878 29.3644 2.73971C29.5653 2.94064 29.6782 3.21316 29.6782 3.49732V9.30125C29.6688 9.58243 29.5529 9.84953 29.354 10.0485C29.1551 10.2474 28.888 10.3633 28.6068 10.3727H22.8039C22.5198 10.3727 22.2472 10.2598 22.0463 10.0589C21.8454 9.85793 21.7325 9.58541 21.7325 9.30125C21.7325 9.01709 21.8454 8.74457 22.0463 8.54364C22.2472 8.3427 22.5198 8.22982 22.8039 8.22982H26.3701C24.3233 6.05464 21.5819 4.66151 18.6182 4.2905C15.6546 3.9195 12.6543 4.59384 10.1345 6.19735C7.61465 7.80085 5.73303 10.2331 4.81388 13.0749C3.89473 15.9167 3.99561 18.9902 5.09913 21.7656C6.20266 24.541 8.23972 26.8446 10.8593 28.2794C13.4789 29.7142 16.5169 30.1904 19.4498 29.6259C22.3827 29.0613 25.0269 27.4914 26.9266 25.1867C28.8264 22.882 29.8628 19.9868 29.8571 17C29.8571 16.7158 29.97 16.4433 30.171 16.2424C30.3719 16.0415 30.6444 15.9286 30.9286 15.9286C31.2127 15.9286 31.4853 16.0415 31.6862 16.2424C31.8871 16.4433 32 16.7158 32 17C32 19.9667 31.1203 22.8668 29.472 25.3336C27.8238 27.8003 25.4811 29.7229 22.7403 30.8582C19.9994 31.9935 16.9834 32.2906 14.0736 31.7118C11.1639 31.133 8.49119 29.7044 6.3934 27.6066C4.29561 25.5088 2.867 22.8361 2.28822 19.9264C1.70944 17.0166 2.00649 14.0006 3.14181 11.2597C4.27712 8.51886 6.19971 6.17618 8.66645 4.52796C11.1332 2.87973 14.0333 2 17 2Z"})})}},74170:function(e,t,r){r.d(t,{b:function(){return a}});var i=r(77191),n=r(85893),a=function(e){return(0,i.Z)(e),(0,n.jsxs)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"fill-black dark:fill-white",children:[(0,n.jsx)("path",{d:"M27.0418 30.542C27.1185 30.357 27.1386 30.1535 27.0996 29.9572C27.0605 29.7608 26.9641 29.5805 26.8225 29.439L17.7153 20.3318C17.6214 20.2378 17.5099 20.1633 17.3871 20.1124C17.2644 20.0615 17.1328 20.0353 16.9999 20.0353C16.867 20.0353 16.7354 20.0615 16.6127 20.1124C16.4899 20.1633 16.3784 20.2378 16.2845 20.3318L7.17733 29.439C7.03579 29.5805 6.93939 29.7608 6.90032 29.9571C6.86126 30.1534 6.88128 30.3569 6.95786 30.5418C7.03444 30.7267 7.16413 30.8847 7.33054 30.9959C7.49695 31.1071 7.6926 31.1665 7.89275 31.1665L26.107 31.1665C26.3071 31.1665 26.5028 31.1072 26.6691 30.996C26.8355 30.8848 26.9652 30.7268 27.0418 30.542ZM10.3356 29.1427L16.9999 22.4784L23.6642 29.1427L10.3356 29.1427Z"}),(0,n.jsx)("path",{d:"M6.93864 3.45462C6.86193 3.63954 6.84182 3.84307 6.88087 4.03942C6.91993 4.23577 7.01638 4.41611 7.15802 4.5576L16.2652 13.6647C16.3591 13.7587 16.4706 13.8333 16.5934 13.8842C16.7161 13.9351 16.8477 13.9613 16.9806 13.9613C17.1135 13.9613 17.245 13.9351 17.3678 13.8842C17.4905 13.8333 17.6021 13.7587 17.696 13.6647L26.8031 4.5576C26.9447 4.4161 27.0411 4.23579 27.0801 4.0395C27.1192 3.8432 27.0992 3.63973 27.0226 3.45481C26.946 3.2699 26.8163 3.11184 26.6499 3.00064C26.4835 2.88944 26.2879 2.83008 26.0877 2.83008L7.87343 2.83008C7.67332 2.83008 7.47771 2.88942 7.31132 3.00059C7.14493 3.11175 7.01524 3.26976 6.93864 3.45462Z"}),(0,n.jsx)("path",{d:"M3.84491 15.9879C3.57654 15.9879 3.31916 16.0945 3.12939 16.2843C2.93962 16.4741 2.83301 16.7314 2.83301 16.9998C2.83301 17.2682 2.93962 17.5256 3.12939 17.7153C3.31916 17.9051 3.57654 18.0117 3.84491 18.0117L5.86872 18.0117C6.1371 18.0117 6.39448 17.9051 6.58425 17.7153C6.77402 17.5256 6.88063 17.2682 6.88063 16.9998C6.88063 16.7314 6.77402 16.4741 6.58425 16.2843C6.39448 16.0945 6.1371 15.9879 5.86872 15.9879L3.84491 15.9879Z"}),(0,n.jsx)("path",{d:"M15.9875 15.9879C15.7191 15.9879 15.4617 16.0945 15.272 16.2843C15.0822 16.4741 14.9756 16.7314 14.9756 16.9998C14.9756 17.2682 15.0822 17.5256 15.272 17.7153C15.4617 17.9051 15.7191 18.0117 15.9875 18.0117L18.0113 18.0117C18.2797 18.0117 18.5371 17.9051 18.7268 17.7153C18.9166 17.5256 19.0232 17.2682 19.0232 16.9998C19.0232 16.7314 18.9166 16.4741 18.7268 16.2843C18.5371 16.0945 18.2797 15.9879 18.0113 15.9879L15.9875 15.9879Z"}),(0,n.jsx)("path",{d:"M22.0588 15.9879C21.7904 15.9879 21.533 16.0945 21.3433 16.2843C21.1535 16.4741 21.0469 16.7314 21.0469 16.9998C21.0469 17.2682 21.1535 17.5256 21.3433 17.7153C21.533 17.9051 21.7904 18.0117 22.0588 18.0117L24.0826 18.0117C24.351 18.0117 24.6083 17.9051 24.7981 17.7153C24.9879 17.5256 25.0945 17.2682 25.0945 16.9998C25.0945 16.7314 24.9879 16.4741 24.7981 16.2843C24.6083 16.0945 24.351 15.9879 24.0826 15.9879L22.0588 15.9879Z"}),(0,n.jsx)("path",{d:"M27.1191 16.9998C27.1191 17.2682 27.2258 17.5256 27.4155 17.7153C27.6053 17.9051 27.8627 18.0117 28.131 18.0117L30.1549 18.0117C30.4232 18.0117 30.6806 17.9051 30.8704 17.7153C31.0602 17.5256 31.1668 17.2682 31.1668 16.9998C31.1668 16.7314 31.0602 16.4741 30.8704 16.2843C30.6806 16.0945 30.4232 15.9879 30.1549 15.9879L28.131 15.9879C27.8627 15.9879 27.6053 16.0945 27.4155 16.2843C27.2258 16.4741 27.1191 16.7314 27.1191 16.9998Z"}),(0,n.jsx)("path",{d:"M9.9162 15.9879C9.64783 15.9879 9.39045 16.0945 9.20068 16.2843C9.01091 16.4741 8.9043 16.7314 8.9043 16.9998C8.9043 17.2682 9.01091 17.5256 9.20068 17.7153C9.39045 17.9051 9.64783 18.0117 9.9162 18.0117L11.94 18.0117C12.2084 18.0117 12.4658 17.9051 12.6555 17.7153C12.8453 17.5256 12.9519 17.2682 12.9519 16.9998C12.9519 16.7314 12.8453 16.4741 12.6555 16.2843C12.4658 16.0945 12.2084 15.9879 11.94 15.9879L9.9162 15.9879Z"})]})}},23734:function(e,t,r){r.d(t,{S:function(){return L}});var i=r(27812),n=r(59499),a=r(50029),o=r(87794),c=r.n(o),s=r(58837),l=r(67294),u=r(41112),d=r(90177),h=r(73085),p=r(11163),f=r(73400),g=r(60071),x=r(75418),v=r(63601),m=r(9495),C=r(52494),w=r(34796),b=r(96517),y=r(71113),j=r(56726),k=r(41495),N=r(32892),z=r(85518);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L=function(){var e=(0,d.TL)(),t=(0,l.useState)(!1),r=t[0],n=t[1],o=(0,d.CG)(u.F),S=o.crop,L=o.resize,O=o.rotate,V=o.flip,B=o.image,M=o.operations,E=(0,l.useContext)(s.Q).task,F=(0,l.useContext)(f.F).imageLoaded,T=(0,p.useRouter)(),P=!B||(0,v.F)({original:{width:B.originalWidth,height:B.originalHeight},preview:{width:L.byDimension.width,height:L.byDimension.height}},L.dimensionType,L.unit,L.byPercentage.percentage,m.m,"pixels"!==L.unit?+L.dpi:void 0),H=r||!F||!P,W=function(){var t=(0,a.Z)(c().mark((function t(){var r,i,a,o,s,l,u,d,p,f,x,v,m;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!H&&E&&B){t.next=2;break}return t.abrupt("return");case 2:return(0,w.ga)("send",{hitType:"pageview",page:"/vp/image_resizer/export_started/",title:"Image Resizer Export Started"}),(0,b.S)("event","Export Started",{event_category:"Image Resizer",event_label:"Editor Page"}),(0,b.S)("event","Optimization Level ".concat("custom"!==L.exportSettings.optimizationLevel?L.exportSettings.optimizationLevel:""===L.exportSettings.targetFileSize?"empty":"custom"),{event_category:"Image Resizer",event_label:"Editor Page"}),n(!0),f=D(E,B),t.next=7,e((0,h.N)(f));case 7:if(x=t.sent,v=x.payload,"fulfilled"===x.meta.requestStatus){t.next=11;break}return t.abrupt("return");case 11:m=v.result,T.push("/".concat("en"===T.locale?"":"".concat(T.locale,"/")).concat(null===(r=N.Z["/resize/download/:jobId"])||void 0===r||null===(i=r[null!==(a=T.locale)&&void 0!==a?a:"en"])||void 0===i?void 0:i.replace(":jobId",m.id))),B&&e((0,y.iZ)({width:B.originalWidth,height:B.originalHeight,size:(0,j.t)(null!==(o=null===(s=E.result)||void 0===s?void 0:s.size)&&void 0!==o?o:0)})),e((0,y.bo)({width:null!==(l=null===(u=f.resize.dimensions)||void 0===u?void 0:u.width)&&void 0!==l?l:0,height:null!==(d=null===(p=f.resize.dimensions)||void 0===p?void 0:p.height)&&void 0!==d?d:0})),setTimeout((function(){return e((0,g.Sl)())}),1e3);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(e,t){var r={inputFormat:(0,z.w)(e),outputFormat:(0,z.w)(e)||(0,k.i)(t.title),inputTask:e,options:I()},i=Z(),n=i.rotation,a=i.flipH,o=i.flipV;console.log("%c before analysis %c rotation: ".concat(O.rotation,", flipH: ").concat(V.horizontal,", flipV: ").concat(V.vertical),"color: red; font-weight: 800;"),console.log("%c after analysis %c rotation: ".concat(n,", flipH: ").concat(a,", flipV: ").concat(o),"color: red; font-weight: 800;"),console.log("operations",M);var c={dimensions:"percentage"===L.dimensionType?R({},(0,C.f)(t,S.cropBox,L.byPercentage.percentage,O.rotation)):{width:(0,x.m)(L.byDimension.width,L.unit,"pixels"!==L.unit?+L.dpi:void 0),height:(0,x.m)(L.byDimension.height,L.unit,"pixels"!==L.unit?+L.dpi:void 0)},inputFormat:(0,z.w)(e),options:{dpi:"pixels"===L.dimensionType&&"pixels"!==L.unit?parseInt(L.dpi):void 0,background:L.fillColor.shouldFillColor?"color"===L.fillColor.type?L.fillColor.color:"none":void 0,fillBackground:"percentage"!==L.dimensionType&&(!L.isLocked&&L.fillColor.shouldFillColor),maxFileSize:""!==L.exportSettings.targetFileSize?"KB"===L.exportSettings.fileUnit?L.exportSettings.targetFileSize:1e3*L.exportSettings.targetFileSize:void 0,rotation:n,horizontalFlip:a,verticalFlip:o},outputFormat:"original"===L.exportSettings.saveAs?(0,z.w)(e)||(0,k.i)(t.title):L.exportSettings.saveAs.toString().replace(".",""),percentage:null,resize_as:"dimensions",optimization_level:"custom"!==L.exportSettings.optimizationLevel?L.exportSettings.optimizationLevel:L.exportSettings.targetFileSize?void 0:"best"};return{crop:S.cropBox?r:null,resize:c,importTask:e}},Z=function(){var e=0,t=!1,r=!1;return M.forEach((function(i){var n=i.name;if("flip"!==n){if("rotate"===n){var a=i.value,o=e;return o="clock-wise"===a.direction?(o+90)%360:(o-90)%360,a.flip.horizontal&&a.flip.vertical?(o="clock-wise"===a.direction?(o+180)%360:(o-180)%360,t=!t,r=!r):(a.flip.horizontal||a.flip.vertical)&&(a.flip.horizontal?a.flip.horizontal===t?(t=!1,r=!0):a.flip.horizontal===r&&(t=!0,r=!1):a.flip.vertical===r?(r=!1,t=!0):a.flip.vertical===t&&(r=!0,t=!1)),void(e=o)}}else"horizontal"==i.value.value?t=!t:r=!r})),{rotation:e,flipH:t,flipV:r}},I=function(){var e;if(!B)return{width:0,height:0,x:0,y:0,rotation:0};var t=null,r=null,n=!1;return(0,i.Z)(M).reverse().filter((function(e){return"crop"===e.name?(n=!0,!0):n})).reverse().forEach((function(e){var t=e.name;if("crop"!==t){if(r)if("flip"===t){var i=e.value,n=i.value,a=i.rotation,o=90===Math.abs(a)||270===Math.abs(a)?B.originalHeight:B.originalWidth,c=90===Math.abs(a)||270===Math.abs(a)?B.originalWidth:B.originalHeight;r=R(R({},r),{},"horizontal"===n?{x:o-(r.x+r.width)}:{y:c-(r.y+r.height)})}else{var s=e.value,l=s.rotation,u=s.direction,d=r,h=d.x,p=d.y,f=d.width,g=d.height,x=f;f=g,g=x;var v=h,m=p;90===l&&"clock-wise"===u&&(m=h,v=B.originalHeight-(p+r.height)),90===l&&"counter-clock-wise"===u&&(v=p,m=B.originalWidth-(h+r.width)),180===l&&"clock-wise"===u&&(m=h,v=B.originalWidth-(p+r.height)),180===l&&"counter-clock-wise"===u&&(v=p,m=B.originalHeight-(h+r.width)),270===l&&"clock-wise"===u&&(m=h,v=B.originalHeight-(p+r.height)),0===l&&"clock-wise"===u&&(m=h,v=B.originalWidth-(p+r.height)),0===l&&"counter-clock-wise"===u&&(v=p,m=B.originalHeight-(h+r.width)),-90===l&&"counter-clock-wise"===u&&(v=p,m=B.originalWidth-(h+r.width)),-180===l&&"counter-clock-wise"===u&&(v=p,m=B.originalHeight-(h+r.width)),-180===l&&"clock-wise"===u&&(m=h,v=B.originalWidth-(p+r.height)),-270===l&&"counter-clock-wise"===u&&(v=p,m=B.originalWidth-(h+r.width)),-90===l&&"clock-wise"===u&&(m=h,v=B.originalHeight-(p+r.height)),r={width:f,height:g,x:v,y:m,rotation:l}}}else{var C=e.value;if(!C.cropBox)return;r=r?{width:C.cropBox.width,height:C.cropBox.height,x:r.x+C.cropBox.x,y:r.y+C.cropBox.y,rotation:C.cropBox.rotation}:C.cropBox}})),n=!1,(0,i.Z)(M).reverse().filter((function(e){return"crop"===e.name?(n=!0,!0):n})).forEach((function(e){var i=e.name;if("crop"!==i||t||(t=r),"flip"===i&&t){var n=e.value,a=n.value,o=n.rotation,c=90===Math.abs(o)||270===Math.abs(o)?B.originalHeight:B.originalWidth,s=90===Math.abs(o)||270===Math.abs(o)?B.originalWidth:B.originalHeight;t=R(R({},t),{},"horizontal"===a?{x:c-(t.x+t.width)}:{y:s-(t.y+t.height)})}else if("rotate"===i&&t){var l=e.value,u=l.rotation,d=l.direction,h=t,p=h.x,f=h.y,g=h.width,x=h.height,v=g;g=x,x=v;var m=p,C=f;90===u&&"clock-wise"===d&&(m=f,C=B.originalHeight-(p+t.width)),90===u&&"counter-clock-wise"===d&&(m=B.originalWidth-(f+t.height),C=p),180===u&&"clock-wise"===d&&(m=f,C=B.originalWidth-(p+t.width)),180===u&&"counter-clock-wise"===d&&(m=B.originalHeight-(f+t.height),C=p),270===u&&"clock-wise"===d&&(m=f,C=B.originalHeight-(p+t.width)),0===u&&"clock-wise"===d&&(m=f,C=B.originalWidth-(p+t.width)),0===u&&"counter-clock-wise"===d&&(C=p,m=B.originalHeight-(f+t.height)),-90===u&&"counter-clock-wise"===d&&(C=p,m=B.originalWidth-(f+t.height)),-180===u&&"counter-clock-wise"===d&&(C=p,m=B.originalHeight-(f+t.height)),-180===u&&"clock-wise"===d&&(m=f,C=B.originalWidth-(p+t.width)),-270===u&&"counter-clock-wise"===d&&(C=p,m=B.originalWidth-(f+t.height)),t={width:g,height:x,x:m,y:C,rotation:u}}})),null!==(e=t)&&void 0!==e?e:{width:0,height:0,x:0,y:0,rotation:0}};return{handleExport:W,isExporting:r,imageLoaded:F,dimensionsValid:P,isDisabled:H}}},26671:function(e,t,r){r.d(t,{z:function(){return l}});var i=r(4713),n=r(82566),a=r(26450),o=r(60446),c=r(63041),s=r(85893),l=function(e){var t=e.ratio,r=e.handleCropRatioChange,l=e.customRatioX,u=e.customRatioY,d=e.handleCustomRatioXChange,h=e.handleCustomRatioYChange,p={freeform:(0,n.V)("freeform"),original:(0,n.V)("original"),custom:(0,n.V)("custom"),"1:1":"1:1 (".concat((0,i.k)((0,n.V)("square")),")"),"4:3":"4:3 (".concat((0,i.k)((0,n.V)("monitor")),")"),"14:9":"14:9","16:9":"16:9 (".concat((0,i.k)((0,n.V)("wide-screen")),")"),"16:10":"16:10","2:1":"2:1","3:1":"3:1 (".concat((0,i.k)((0,n.V)("panaroma")),")"),"4:1":"4:1","3:2":"3:2 (35mm ".concat((0,n.V)("film"),")"),"5:4":"5:4","7:5":"7:5","19:10":"19:10","21:9":"21:9 (".concat((0,i.k)((0,n.V)("cinemascope")),")"),"32:9":"32:9 (".concat((0,i.k)((0,n.V)("super-ultra-wide")),")"),"180:180":"".concat((0,n.V)("fb-profile")," 170x170"),"820:312":"".concat((0,n.V)("fb-cover")," 820x312"),"1200:900":"".concat((0,n.V)("fb-post")," 1200x900"),"1280:720":"".concat((0,n.V)("fb-ad")," 1280x720"),"110:110":"".concat((0,n.V)("insta-profile")," 110x110"),"320:320":"".concat((0,n.V)("insta-post")," 320x320"),"1080:1920":"".concat((0,n.V)("insta-story")," 1080x1920"),"400:400":"".concat((0,n.V)("twitter-profile")," 400x400"),"1500:1500":"".concat((0,n.V)("twitter-header")," 1500x1500"),"1024:512":"".concat((0,n.V)("twitter-image")," 1024x512"),"1200:628":"".concat((0,n.V)("twitter-card")," 1200x628"),"1200:675":"".concat((0,n.V)("twitter-ad")," 1200x675"),"800:800":"".concat((0,n.V)("yt-profile")," 800x800"),"2560:1440":"".concat((0,n.V)("yt-channel-art")," 2560x1440"),"5120:2880":"".concat((0,n.V)("yt-thumb")," 1280x720"),"1024:768":"".concat((0,n.V)("web-mini")," 1024x768"),"1280:800":"".concat((0,n.V)("web-small")," 1280x800"),"1366:768":"".concat((0,n.V)("web-common")," 1366x768"),"1440:900":"".concat((0,n.V)("web-medium")," 1440x900"),"1920:1080":"".concat((0,n.V)("full-hd")," 1920x1080"),"3840:2160":"".concat((0,n.V)("ultra-hd")," 4x 3840x2160"),"2480:3508":"".concat((0,n.V)("paper-a-4")," 2480x3508"),"1748:2480":"".concat((0,n.V)("paper-a-5")," 1748x2480"),"1280:1748":"".concat((0,n.V)("paper-a-6")," 1280x1748"),"2400:3300":"".concat((0,n.V)("paper-letter")," 2400x3300")};return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(o.P,{options:c.A.map((function(e){return e})),getOptionValue:function(e){return e},value:t,handleClick:r,label:(0,n.V)("aspect-ratio"),getOptionLabel:function(e){return p[e]},testKey:"crop-settings-crop-ratio"}),"custom"===t&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"capitalize mb-2",children:"".concat((0,i.k)((0,n.V)("ratio"))," (X)")}),(0,s.jsx)(a.I,{className:"w-full",type:"number",acceptFloat:!0,min:0,value:l,onChange:function(e){return d(+e.target.value)},"data-testid":"crop-settings-left"})]}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"capitalize mb-2",children:"".concat((0,i.k)((0,n.V)("ratio"))," (Y)")}),(0,s.jsx)(a.I,{className:"w-full",type:"number",min:0,acceptFloat:!0,value:u,onChange:function(e){return h(+e.target.value)},"data-testid":"crop-settings-top"})]})]})]})}},86784:function(e,t,r){r.d(t,{u:function(){return T}});var i=r(26671),n=r(26450),a=r(10131),o=r(85893),c=function(e){var t=e.width,r=e.height,i=e.handleWidthChange,c=e.handleHeightChange;return(0,o.jsxs)("div",{className:"flex max-w-full items-end gap-2",children:[(0,o.jsxs)("div",{className:"flex flex-col min-w-0 gap-2",children:[(0,o.jsx)("div",{className:"capitalize",children:(0,o.jsx)(a.vN,{keyName:"width"})}),(0,o.jsx)(n.I,{type:"number",value:Math.round(t),min:0,onChange:i,"data-testid":"crop-settings-width"})]}),(0,o.jsxs)("div",{className:"flex flex-col min-w-0 gap-2",children:[(0,o.jsx)("div",{className:"capitalize",children:(0,o.jsx)(a.vN,{keyName:"height"})}),(0,o.jsx)(n.I,{type:"number",value:Math.round(r),min:0,onChange:c,"data-testid":"crop-settings-width"})]})]})},s=r(59499),l=r(50029),u=r(87794),d=r.n(u),h=r(67294),p=r(60071),f=r(90177),g=r(48984),x=r(73400),v=r(81989),m=r(63041),C=r(46080),w=r(85127),b=r(99195),y=r(36930),j=r(96664);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z=null,S=function(){var e=(0,f.CG)((function(e){return e.resizeEditor}),R),t=e.crop,r=t.height,i=t.width,n=t.ratio,a=t.cropBox,o=t.customRatioValues,c=o.x,s=o.y,u=e.rotate.rotation,k=e.image,S=(0,f.TL)(),L=(0,h.useContext)(x.F),O=L.cropRef,V=L.parentImageRef,B=L.initialImageRef,M=(0,y.y)(O).isLoaded,E=(0,h.useState)(!1),F=E[0],T=E[1],P=(0,h.useState)(!1),H=P[0],W=P[1],D=(0,h.useRef)(null),Z=(0,h.useRef)(null),I=function(){var e=(0,l.Z)(d().mark((function e(){var t,r,i,n,o,c,s,l,h,g,x,v,m,C,b,y,N,R;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F&&!H){e.next=2;break}return e.abrupt("return");case 2:return T(!0),e.next=5,(0,w._)();case 5:if(z&&z.getCroppedCanvas()&&k&&null!==O&&void 0!==O&&O.current&&null!==V&&void 0!==V&&V.current){e.next=7;break}return e.abrupt("return");case 7:return t=z.getCropBoxData(),r=t.width,i=t.height,n=t.left,o=t.top,c=z.getCanvasData(),s=c.width,l=c.height,S((0,p.pU)(n)),S((0,p.pR)(o)),h=z.getCroppedCanvas().toDataURL(),e.next=14,(0,j.L)(h,O.current);case 14:return e.next=16,(0,j.L)(h,V.current);case 16:return O.current.width=r,O.current.height=i,V.current.width=r,V.current.height=i,S((0,p.ZN)({value:{width:V.current.width,height:V.current.height,rotation:u}})),z.destroy(),z=null,q(r/i),g=k.originalWidth,x=k.originalHeight,v=90===Math.abs(u)||270===Math.abs(u),m=0,C=0,v?a?90===Math.abs(a.rotation)||270===Math.abs(a.rotation)?(m=a.width/s,C=a.height/l):(m=a.height/s,C=a.width/l):(m=x/s,C=g/l):a?90===Math.abs(a.rotation)||270===Math.abs(a.rotation)?(m=a.height/s,C=a.width/l):(m=a.width/s,C=a.height/l):(m=g/s,C=x/l),b=m*n,y=C*o,N=m*r,R=C*i,S((0,p.x_)({cropBox:{x:b,y:y,width:N,height:R,rotation:u}})),S((0,p.Ym)({value:r/i})),T(!1),document.body.dispatchEvent(new Event("crop-complete")),e.next=39,(0,w._)();case 39:S((0,p.CT)(Math.round(f.h.getState().resizeEditor.crop.width))),S((0,p.yD)(Math.round(f.h.getState().resizeEditor.crop.height)));case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F&&!H){e.next=2;break}return e.abrupt("return");case 2:if(k&&null!==O&&void 0!==O&&O.current&&null!==V&&void 0!==V&&V.current&&z&&null!==B&&void 0!==B&&B.current){e.next=4;break}return e.abrupt("return");case 4:return W(!0),e.next=7,(0,w._)();case 7:return z.destroy(),z=null,S((0,p.x_)({cropBox:null})),S((0,p.zO)()),S((0,p.B7)()),S((0,p.Wn)()),S((0,p.oM)()),O.current.width=k.initialWidth,O.current.height=k.initialHeight,e.next=18,(0,j.L)(B.current.getAttribute("src")||"",O.current);case 18:return e.next=20,(0,j.L)(O.current.getAttribute("src")||"",V.current);case 20:q(),$("freeform"),S((0,p.Ym)({value:k.initialWidth/k.initialHeight})),S((0,p.CT)(k.originalWidth)),S((0,p.yD)(k.originalHeight)),W(!1),document.body.dispatchEvent(new Event("crop-reset-complete"));case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){if(!k)return e;var t=k.originalWidth/k.initialWidth;return 0===t?e:e/t},_=function(e){if(!k)return e;var t=k.originalWidth/k.initialWidth;return 0===t?e:e*t},J=function(e){return k?e/(k.originalHeight/k.initialHeight):e},U=function(e){return k?e*(k.originalHeight/k.initialHeight):e},Y=function(e){return{aspectRatio:null!==e&&void 0!==e?e:0,zoomable:!1,crop:K,cropdrag:X,cropresize:K,ready:function(t){return function(e,t){if(!t)return;var n=e.getCanvasData(),a=n.width,o=n.height;e.setCropBoxData({width:a,height:o}),S((0,p.pU)(0)),S((0,p.pR)(0)),S((0,p.l5)(i)),S((0,p.zE)(r))}(t,e)},viewMode:1,minContainerHeight:1,minContainerWidth:1}};function X(e,t){S((0,p.pR)(U(e))),S((0,p.pU)(_(t)))}function K(e,t,r,i){return Q.apply(this,arguments)}function Q(){return Q=(0,l.Z)(d().mark((function e(t,r,i,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S((0,p.Bo)({width:_(t),height:U(r),top:U(i),left:_(n)}));case 1:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}var q=function(e){if(!M||null===O||void 0===O||!O.current||!k||z)return null;var t=(0,v.r)(O.current,Y(e)).cropper;return z=t,t},$=function(e){if(z&&k&&null!==V&&void 0!==V&&V.current){var t=z.getCropBoxData();S((0,p.pj)(e)),"original"===e?z.setAspectRatio(k.ratio):"custom"!==e?z.setAspectRatio((0,g.O)(e)):"custom"===e&&z.setAspectRatio(1),ee(z,t)}},ee=function(e,t){var r=e.getCropBoxData(),i=r.width,n=r.height;e.setCropBoxData(N(N({},t),{},{width:i,height:n})),S((0,p.l5)(_(i))),S((0,p.zE)(U(n)))},te=(0,C.e)(),re=function(){te((function(){var e;null===(e=D.current)||void 0===e||e.click()}))},ie=function(){te((function(){var e;null===(e=Z.current)||void 0===e||e.click()}))},ne=function(e,t){if(!(e<=0||t<=0)&&z){var r=z.getCropBoxData();z.setAspectRatio(e/t),ee(z,r)}},ae=(0,C.e)();return(0,h.useEffect)((function(){ae((function(){var e=f.h.getState().resizeEditor.crop.cropBox;if(e){var t=e.width,r=e.height;q(t/r)}else q()}))}),[M]),(0,h.useEffect)((function(){return document.body.addEventListener("crop-apply",re),document.body.addEventListener("crop-reset",ie),function(){var e;null===(e=z)||void 0===e||e.destroy(),z=null,document.body.removeEventListener("crop-apply",re),document.body.removeEventListener("crop-reset",ie)}}),[]),{handleCrop:I,handleReset:A,handleToggleCropOrientation:function(){var e;if(k)if(S((0,p.XI)()),null===(e=z)||void 0===e||e.setCropBoxData({width:G(r),height:J(i)}),r/i===k.originalWidth/k.originalHeight)$("original");else{var t=m.A.filter((function(e){return"custom"!==e&&"original"!==e&&"freeform"!==e})).find((function(e){return(0,g.O)(e)===r/i}));$(t||"custom")}},ratio:n,handleRatioChange:$,width:i,height:r,handleWidthChange:function(e){var t;if(k){var i=Number(e.target.value),a=i>0?i>k.originalWidth?k.originalWidth:i:0;if("freeform"!==n){var o=r;o="original"===n?k.originalHeight/k.originalWidth*a:"custom"===n?(0,b.c)(s,c)*a:a/(0,g.O)(n),S((0,p.zE)(o))}S((0,p.l5)(a)),null===(t=z)||void 0===t||t.setCropBoxData({width:G(a)})}},handleHeightChange:function(e){var t;if(k){var r=Number(e.target.value),a=r>0?r>k.originalHeight?k.originalHeight:r:0;if("freeform"!==n){var o=i;o="original"===n?k.originalWidth/k.originalHeight*a:"custom"===n?(0,b.c)(c,s)*a:a*(0,g.O)(n),S((0,p.l5)(o))}S((0,p.zE)(a)),null===(t=z)||void 0===t||t.setCropBoxData({height:J(a)})}},handleTopChange:function(e){var t;S((0,p.pR)(+e.target.value)),null===(t=z)||void 0===t||t.setCropBoxData({top:J(+e.target.value)})},handleLeftChange:function(e){var t;S((0,p.pU)(+e.target.value)),null===(t=z)||void 0===t||t.setCropBoxData({left:G(+e.target.value)})},isCropping:F,isResetting:H,cropButtonRef:D,resetButtonRef:Z,customRatioX:c,customRatioY:s,handleCustomRatioXChange:function(e){S((0,p.vG)(e)),ne(e,s)},handleCustomRatioYChange:function(e){S((0,p.Ay)(e)),ne(c,e)}}},R=function(e,t){return e.crop.height===t.crop.height&&e.crop.width===t.crop.width&&e.crop.ratio===t.crop.ratio&&e.crop.customRatioValues.x===t.crop.customRatioValues.x&&e.crop.customRatioValues.y===t.crop.customRatioValues.y&&JSON.stringify(e.crop.cropBox)===JSON.stringify(t.crop.cropBox)&&e.rotate.rotation===t.rotate.rotation&&JSON.stringify(e.image)===JSON.stringify(t.image)},L=r(82566),O=r(41112),V=function(e,t){return e.crop.left===t.crop.left},B=function(e){var t=e.handleChange,r={left:(0,f.CG)(O.F,V).crop.left}.left;return(0,o.jsxs)("div",{className:"",children:[(0,o.jsxs)("div",{className:"capitalize mb-2",children:[(0,L.V)("position")," (X)"]}),(0,o.jsx)(n.I,{className:"w-full",type:"number",min:0,value:Math.round(r),onChange:t,"data-testid":"crop-settings-left"})]})},M=function(e,t){return e.crop.top===t.crop.top},E=function(e){var t=e.handleChange,r={top:(0,f.CG)(O.F,M).crop.top}.top;return(0,o.jsxs)("div",{className:"",children:[(0,o.jsxs)("div",{className:"capitalize mb-2",children:[(0,L.V)("position")," (Y)"]}),(0,o.jsx)(n.I,{className:"w-full",type:"number",min:0,value:Math.round(r),onChange:t,"data-testid":"crop-settings-top"})]})},F=r(38813),T=function(){var e=S(),t=e.handleCrop,r=e.handleReset,n=e.ratio,s=e.handleRatioChange,l=e.height,u=e.width,d=e.handleWidthChange,h=e.handleHeightChange,p=e.handleTopChange,f=e.handleLeftChange,g=e.isCropping,x=e.isResetting,v=e.cropButtonRef,m=e.resetButtonRef,C=e.customRatioX,w=e.customRatioY,b=e.handleCustomRatioXChange,y=e.handleCustomRatioYChange;return(0,o.jsxs)("div",{className:"flex flex-col h-full max-h-full",children:[(0,o.jsxs)("div",{className:"flex-grow overflow-y-scroll scroll lg:gap-8 px-6 pt-6 pb-6",children:[(0,o.jsx)("div",{className:"pb-4",children:(0,o.jsx)(c,{width:u,height:l,handleWidthChange:d,handleHeightChange:h})}),(0,o.jsx)("div",{className:"flex flex-col flex-grow",children:(0,o.jsx)(i.z,{ratio:n,handleCropRatioChange:s,customRatioX:C,customRatioY:w,handleCustomRatioXChange:b,handleCustomRatioYChange:y})}),(0,o.jsx)("div",{className:"mt-2 text-2xl font-semibold py-6",children:(0,o.jsx)(a.vN,{keyName:"crop-position"})}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(B,{handleChange:f}),(0,o.jsx)(E,{handleChange:p})]})]}),(0,o.jsxs)("div",{className:"flex-shrink-0 w-full flex py-2 gap-2 border-t border-t-irGray-200 dark:border-t-darkSurface-600 px-2",children:[(0,o.jsx)("div",{className:"w-full cursor-pointer flex items-center justify-center rounded-lg text-white text-center py-2 font-semibold text-xl capitalize hover:bg-irBlue-400 dark:hover:bg-darkPrimary-200 lg:block bg-irBlue-200",onClick:t,ref:v,"data-testid":"crop-settings-crop-button",children:g?(0,o.jsx)("div",{className:"flex items-center justify-center",children:(0,o.jsx)(F.a,{className:"stroke-white",width:25,height:25})}):(0,L.V)("crop")}),(0,o.jsx)("div",{className:"cursor-pointer hidden lg:flex items-center justify-center border-slate-300 dark:border-darkSurface-600 dark:hover:bg-darkSurface-200 dark:hover:text-white border rounded-lg text-gray-900 text-center py-2 px-6 text-xl capitalize hover:bg-irGray-200 dark:text-white",onClick:r,ref:m,"data-testid":"crop-settings-reset-button",children:x?(0,o.jsx)(F.a,{className:"stroke-[var(--dark-gray)]",width:25,height:25}):(0,L.V)("reset")})]})]})}},38060:function(e,t,r){r.d(t,{D:function(){return n}});var i=r(85893),n=function(e){var t=e.title;return(0,i.jsx)("div",{className:"flex items-center gap-4",children:(0,i.jsx)("div",{className:"capitalize text-2xl font-semibold whitespace-nowrap","data-testid":"edit-type-title",children:t})})}},1129:function(e,t,r){r.d(t,{d:function(){return j}});var i=r(82566),n=r(51991),a=r(38813),o=r(74170),c=r(10131),s=r(38060),l=r(50029),u=r(87794),d=r.n(u),h=r(73400),p=r(78408),f=r(96664),g=r(85127),x=r(67294),v=r(60071),m=r(36930),C=r(41112),w=r(90177),b=function(e,t){return e.flip.horizontal===t.flip.horizontal&&e.flip.vertical===t.flip.vertical&&JSON.stringify(e.image)===JSON.stringify(t.image)&&e.rotate.rotation===t.rotate.rotation},y=r(85893),j=function(){var e=function(){var e=(0,w.CG)(C.F,b),t=e.image,r=e.flip,i=r.horizontal,n=r.vertical,a=e.rotate.rotation,o=(0,w.TL)(),c=(0,x.useContext)(h.F),s=c.rotateRef,u=c.parentImageRef;(0,m.y)(s);var y=(0,x.useState)(""),j=y[0],k=y[1],N=function(){var e=(0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k("horizontal"),e.next=3,(0,g._)();case 3:return e.next=5,S(!0,!1);case 5:o((0,v.rW)());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k("vertical"),e.next=3,(0,g._)();case 3:return e.next=5,S(!1,!0);case 5:o((0,v.Bq)());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,l.Z)(d().mark((function e(r,i){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==s&&void 0!==s&&s.current&&null!==u&&void 0!==u&&u.current&&t&&""===j){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,p.d)(r,i,s.current,u.current.getAttribute("src")||"",u.current.width,u.current.height);case 4:return e.next=6,(0,f.L)(s.current.getAttribute("src")||"",u.current);case 6:return k(""),e.next=9,(0,g._)();case 9:o((0,v.ZN)({value:{width:u.current.width,height:u.current.height,rotation:a}}));case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return{horizontal:i,vertical:n,handleHorizontalToggle:N,handleVerticalToggle:z,flippingState:j}}(),t=e.handleHorizontalToggle,r=e.handleVerticalToggle,u=e.flippingState;return(0,y.jsxs)("div",{children:[(0,y.jsx)(s.D,{title:(0,i.V)("flip-image")}),(0,y.jsxs)("div",{className:"flex items-center gap-4 my-8 select-none",children:[(0,y.jsxs)("div",{className:"flex-grow text-center w-full",onClick:t,"data-testid":"flip-horizontal",children:[(0,y.jsx)("div",{className:"dark:bg-darkSurface-200 cursor-pointer w-full flex items-center justify-center rounded-2xl border-slate-200 dark:border-darkSurface-400 border py-8 my-2",children:"horizontal"===u?(0,y.jsx)(a.a,{className:"stroke-[var(--dark-gray)]",height:34,width:34}):(0,y.jsx)(n.P,{})}),(0,y.jsx)("div",{className:"font-sembold text-xl capitalize",children:(0,y.jsx)(c.vN,{keyName:"horizontally"})})]}),(0,y.jsxs)("div",{className:"flex-grow text-center w-full",onClick:r,"data-testid":"flip-vertical",children:[(0,y.jsx)("div",{className:"dark:bg-darkSurface-200 cursor-pointer w-full flex items-center justify-center rounded-2xl border-slate-200 dark:border-darkSurface-400 border py-8 my-2",children:"vertical"===u?(0,y.jsx)(a.a,{className:"stroke-[var(--dark-gray)]",height:34,width:34}):(0,y.jsx)(o.b,{})}),(0,y.jsx)("div",{className:"font-sembold text-xl capitalize",children:(0,y.jsx)(c.vN,{keyName:"vertically"})})]})]})]})}},88680:function(e,t,r){r.d(t,{y:function(){return z},u:function(){return N}});var i=r(86784),n=r(1129),a=r(44438),o=r(86076),c=r(4713),s=r(82566),l=r(60071),u=r(41112),d=r(90177),h=function(e,t){return e.currentType===t.currentType&&e.editModal===t.editModal},p=r(51556),f=r(45056),g=r(96254),x=r(52746),v=r(38813),m=r(10343),C=r(23734),w=r(36154),b=r(85893),y=function(){var e=(0,C.S)(),t=e.handleExport,r=e.isExporting,i=e.imageLoaded;return(0,b.jsxs)(x.N,{active:!r&&i,onClick:(0,w.U)(t),children:[(0,b.jsx)("div",{children:(0,s.V)("resize")}),(0,b.jsx)("div",{children:r||!i?(0,b.jsx)(v.a,{width:20,height:20,stroke:"white"}):(0,b.jsx)(m.m,{className:"fill-white"})})]})},j=r(9249),k=r(67294),N=function(){var e=function(){var e=(0,d.CG)(u.F,h),t=e.currentType,r=e.editModal,i=(0,d.TL)();return{currentType:t,title:{crop:(0,c.k)("".concat((0,s.V)("crop")," ").concat((0,s.V)("settings"))),resize:(0,c.k)("".concat((0,s.V)("resize")," ").concat((0,s.V)("settings"))),flip:"",rotate:""}[t],editModal:r,handleModalClose:function(){i((0,l.Ij)()),i((0,l.Xc)("resize"))}}}(),t=e.title,r=e.currentType,x=e.editModal,v=e.handleModalClose;return(0,b.jsx)(f.k,{isOpen:x,onClose:v,contentParentClassNames:"dark:bg-darkSurface-100",titleBar:(0,b.jsxs)("div",{className:"w-full flex items-center justify-between px-4 py-2 text-black dark:text-white",children:[(0,b.jsx)("div",{className:"capitalize text-xl font-semibold whitespace-nowrap",children:t}),(0,b.jsx)("div",{onClick:v,className:"bg-irGray-300 dark:bg-darkSurface-200 h-6 w-6 rounded-full flex items-center justify-center",id:g.T,children:(0,b.jsx)(p.T,{})})]}),interactiveBackground:"crop"===r,bottomSection:"resize"===r?(0,b.jsx)(j._,{children:(0,b.jsx)(y,{})}):"crop"===r?(0,b.jsx)(z,{}):null,initialHeight:"60vh",children:(0,b.jsxs)("div",{className:"text-black dark:text-white",children:["resize"===r&&(0,b.jsx)(a._,{}),"crop"===r&&(0,b.jsx)(i.u,{}),("flip"===r||"rotate"===r)&&(0,b.jsxs)("div",{className:"px-4",children:[(0,b.jsx)(n.d,{}),(0,b.jsx)(o.h,{})]})]})})},z=function(){var e=(0,k.useState)(!1),t=e[0],r=e[1],i=(0,k.useState)(!1),n=i[0],a=i[1];function o(){r(!1)}function c(){a(!1)}return(0,k.useEffect)((function(){return document.body.addEventListener("crop-complete",o),document.body.addEventListener("crop-reset-complete",c),function(){document.body.removeEventListener("crop-complete",o),document.body.removeEventListener("crop-reset-complete",c)}}),[]),(0,b.jsxs)("div",{className:"w-full py-2 px-2 flex items-center justify-center gap-4 border-t border-t-irGray-300 dark:border-t-darkSurface-600",children:[(0,b.jsx)("div",{className:"bg-irBlue-200 dark:bg-darkPrimary-100 text-white flex-grow py-4 text-center rounded-xl font-semibold border border-irBlue-200",onClick:function(e){t||(e.stopPropagation(),r(!0),document.body.dispatchEvent(new Event("crop-apply")))},children:t?(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(v.a,{className:"stroke-white",width:20,height:20})}):"Crop"}),(0,b.jsx)("div",{className:"bg-white dark:bg-darkSurface-300 text-black dark:text-white border border-irGray-400 dark:border-darkSurface-200 rounded-xl px-8 py-4 font-semibold",onClick:function(e){n||(e.stopPropagation(),a(!0),document.body.dispatchEvent(new Event("crop-reset")))},children:n?(0,b.jsx)("div",{className:"flex items-center justify-center mx-2",children:(0,b.jsx)(v.a,{className:"stroke-black",width:20,height:20})}):"Reset"})]})}},44438:function(e,t,r){r.d(t,{_:function(){return D}});var i=r(10131),n=r(60071),a=r(41112),o=r(90177),c=function(e,t){return e.resize.dimensionType===t.resize.dimensionType},s=r(85893),l=function(){var e=function(){var e=(0,o.CG)(a.F,c).resize.dimensionType,t=(0,o.TL)();return{handleClick:function(e){t((0,n.lf)(e))},dimensionType:e}}(),t=e.handleClick,r=e.dimensionType;return(0,s.jsxs)("div",{className:"cursor-pointer flex items-center gap-4 py-1 justify-between rounded-lg bg-irGray-200 dark:bg-darkSurface-400 font-semibold capitalize mt-8 whitespace-nowrap px-1",children:[(0,s.jsx)("div",{"data-testid":"by-dimensions",className:"py-2 flex-grow text-center ".concat("pixels"===r?"bg-white dark:bg-darkSurface-200 text-black rounded-lg":"text-irGray-600"," dark:text-white"),onClick:function(){return t("pixels")},children:(0,s.jsx)(i.vN,{keyName:"by-dimensions"})}),(0,s.jsx)("div",{"data-testid":"as-percentage",className:"py-2 flex-grow text-center ".concat("percentage"===r?"bg-white dark:bg-darkSurface-200 text-black rounded-lg":"text-irGray-600"," dark:text-white"),onClick:function(){return t("percentage")},children:(0,s.jsx)(i.vN,{keyName:"as-percentage"})})]})},u=r(30111),d=r(15340),h=r(52494),p=function(e,t){var r,i,n,a;return e.resize.byPercentage.percentage===t.resize.byPercentage.percentage&&(null===(r=e.image)||void 0===r?void 0:r.originalWidth)===(null===(i=t.image)||void 0===i?void 0:i.originalWidth)&&(null===(n=e.image)||void 0===n?void 0:n.originalHeight)===(null===(a=t.image)||void 0===a?void 0:a.originalHeight)&&e.rotate.rotation===t.rotate.rotation&&JSON.stringify(e.crop.cropBox)===JSON.stringify(t.crop.cropBox)},f=r(30258),g=function(){var e=function(){var e=(0,o.CG)(a.F,p),t=e.resize.byPercentage.percentage,r=e.rotate.rotation,i=e.crop.cropBox,c=e.image,s=(0,o.TL)(),l=(0,h.f)(c,i,t,r);return{percentage:t,handleChange:function(e){return s((0,n.sp)(e))},width:l.width,height:l.height}}(),t=e.handleChange,r=e.percentage,c=e.width,l=e.height;return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"capitalize",children:(0,s.jsx)(i.vN,{keyName:"size"})}),(0,s.jsxs)("div",{className:"flex items-center gap-4 border border-irGray-400 dark:border-darkSurface-100 dark:bg-darkSurface-200 rounded-xl py-4 px-4",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)(d.i,{min:0,max:f.$,defaultValue:r,handleChange:t,step:1,testId:"resize-percentage-slider"})}),(0,s.jsxs)("div",{className:"mt-1","data-testid":"resize-settings-percentage-value",children:[r,"%"]})]}),(0,s.jsxs)("div",{className:"text-irGray-500 text-sm","data-testid":"resize-settings-percentage-helper-text",children:[(0,s.jsx)(i.vN,{keyName:"as-percentage-helper-text",variables:{percentage:r}})," (".concat(c," X ").concat(l," px)")]})]})},x=r(73400),v=r(67294),m=r(36930),C=r(4713),w=r(82566),b=r(58777),y=r(57552),j=r(3782),k=r(29627),N=r(14124),z=function(e,t){return JSON.stringify(e.resize.fillColor)===JSON.stringify(t.resize.fillColor)&&JSON.stringify(e.image)===JSON.stringify(t.image)&&e.resize.exportSettings.saveAs===t.resize.exportSettings.saveAs},S=function(){var e=function(){var e=(0,o.CG)(a.F,z),t=e.image,r=e.resize,i=r.fillColor,c=i.color,s=i.shouldFillColor,l=i.type,u=r.exportSettings.saveAs,d=(0,o.TL)();return{shouldFillColor:s,color:c,handleColorChange:function(e){return d((0,n.eE)(e))},handleShouldFillColorChange:function(e){return d((0,n.Y0)(e))},type:l,handleFillColorTypeChange:function(e){return d((0,n._O)(e))},image:t,saveAs:u}}(),t=e.color,r=e.handleColorChange,i=e.handleShouldFillColorChange,c=e.shouldFillColor,l=e.type,u=e.handleFillColorTypeChange,d=e.image,h=e.saveAs;return(0,s.jsxs)("div",{"data-testid":"fill-color-container",className:"flex flex-col gap-4 py-4 px-6 rounded-lg border border-irGray-400 dark:border-darkSurface-600",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(b.X,{defaultIsChecked:c,handleChange:i,label:(0,C.k)((0,w.V)("background-fill")),testId:"resize-settings-fill-color"}),(0,s.jsx)("div",{className:"ml-auto",children:(0,s.jsx)(N.e,{text:(0,w.V)("fill-color-tooltip-text"),children:(0,s.jsx)(j.U,{})})})]}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"border-b-irGray-400 dark:border-b-darkSurface-600 border-b w-full"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center","data-testid":"color-input-container",children:[(0,s.jsx)(k.Y,{value:"color"===l,handleClick:function(){return u("color")},label:(0,w.V)("pick-a-color")}),"color"===l&&(0,s.jsx)("div",{className:"ml-auto flex items-center gap-4",children:(0,s.jsx)(y.T,{defaultColor:t,handleChange:r})})]}),"png"===(null===d||void 0===d?void 0:d.ext)&&".jpg"!==h&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(k.Y,{value:"transparent"===l,handleClick:function(){return u("transparent")},label:(0,C.k)((0,w.V)("transparent"))}),(0,s.jsx)(N.e,{text:(0,w.V)("transparent-tooltip-text"),children:(0,s.jsx)(j.U,{})})]})]})]})]})},R=r(33284),L=r(60446),O=r(44949),V=function(e,t){return e.resize.exportSettings.saveAs===t.resize.exportSettings.saveAs},B=function(){var e=function(){var e=(0,o.CG)(a.F,V).resize.exportSettings.saveAs,t=(0,o.TL)();return{saveAs:e,handleChange:function(e){return t((0,n.Bd)(e))}}}(),t=e.saveAs,r=e.handleChange;return(0,s.jsx)("div",{className:"z-0",children:(0,s.jsx)(L.P,{value:t,options:O.N.map((function(e){return e})),label:(0,w.V)("extension-label"),getOptionLabel:function(e){return"original"===e?(0,w.V)("original"):(0,C.k)((0,w.V)(e.replace(".",""))).toUpperCase()},getOptionValue:function(e){return e},handleClick:r,testKey:"resize-settings-save-as"})})},M=r(26450),E=function(e,t){return e.resize.exportSettings.targetFileSize===t.resize.exportSettings.targetFileSize&&e.resize.exportSettings.fileUnit===t.resize.exportSettings.fileUnit&&e.resize.exportSettings.saveAs===t.resize.exportSettings.saveAs&&JSON.stringify(e.image)===JSON.stringify(t.image)},F=r(98058),T=function(){var e=function(){var e=(0,o.CG)(a.F,E),t=e.image,r=e.resize.exportSettings,i=r.targetFileSize,c=r.fileUnit,s=r.saveAs,l=(0,o.TL)();return{targetFileSize:i,handleChange:function(e){return l((0,n.yI)(+e.target.value))},fileUnit:c,handleFileUnitChange:function(e){return l((0,n.dS)(e))},ext:null===t||void 0===t?void 0:t.ext,saveAs:s}}(),t=e.handleChange,r=e.targetFileSize,c=e.fileUnit,l=e.handleFileUnitChange,u=e.ext,d=e.saveAs;if("jpg"===u||"jpeg"===u){if("original"!==d&&".jpg"!==d&&".jpeg"!==d)return null}else if(".jpg"!==d&&".jpeg"!==d)return null;return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("label",{className:"flex justify-between items-center","data-testid":"resize-settings-target-size-title",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"font-semibold capitalize",children:[(0,s.jsx)(i.vN,{keyName:"target-file-size-label"})," "]}),(0,s.jsxs)("span",{className:"text-irGray-600",children:["(",(0,w.V)("optional"),")"]})]}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(N.e,{text:(0,w.V)("max-file-size-tooltip-text"),children:(0,s.jsx)(j.U,{})})})]}),(0,s.jsxs)("div",{className:"flex items-center pt-2 pb-2",children:[(0,s.jsx)(M.I,{className:"flex-grow py-6 rounded-r-none border-r-0",type:"number",value:0===r?"":r,onChange:t,"data-testid":"resize-settings-target-size"}),(0,s.jsx)(L.P,{options:F.k.map((function(e){return e})),value:c,getOptionValue:function(e){return e},getOptionLabel:function(e){return e},handleClick:l,testKey:"max-file-size-unit"})]})]})},P=r(23603),H=function(e){var t=e.isOpen,r=e.toggle;return(0,s.jsxs)("div",{className:"cursor-pointer flex items-center pt-6",onClick:r,"data-testid":"expert-settings-title",children:[(0,s.jsx)("div",{className:"font-semibold text-2xl",children:(0,s.jsx)(i.vN,{keyName:"export-settings"})}),(0,s.jsx)("div",{className:"ml-auto",children:t?(0,s.jsx)("div",{className:"rotate-180",children:(0,s.jsx)(P.e,{width:15,height:15})}):(0,s.jsx)("div",{children:(0,s.jsx)(P.e,{width:15,height:15})})})]})},W=function(){var e=(0,R.O)(!0),t=e.isOpen,r=e.toggle;return(0,s.jsxs)("div",{className:"flex flex-col gap-8 lg:pb-24",children:[(0,s.jsx)(H,{isOpen:t,toggle:r}),t&&(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsx)(T,{}),(0,s.jsx)(B,{})]})]})},D=function(){var e=function(){var e=(0,o.CG)((function(e){return e.resizeEditor.resize.dimensionType})),t=(0,o.CG)((function(e){return e.resizeEditor.resize.isLocked})),r=(0,o.CG)((function(e){return e.resizeEditor.resize.unit})),i=(0,v.useContext)(x.F).resizeRef;return(0,m.y)(i),{dimensionType:e,isLocked:t,unit:r}}(),t=e.dimensionType,r=e.isLocked;return(0,s.jsxs)("div",{className:"flex flex-col gap-4 lg:gap-8 pb-8 lg:pb-0 px-6 max-h-full h-full overflow-y-scroll scroll",children:[(0,s.jsx)(l,{}),"pixels"===t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.$,{}),!r&&(0,s.jsx)(S,{})]}):(0,s.jsx)(g,{}),(0,s.jsx)(W,{})]})}},86076:function(e,t,r){r.d(t,{h:function(){return k}});var i=r(82566),n=r(38813),a=r(72520),o=r(10131),c=r(38060),s=r(50029),l=r(87794),u=r.n(l),d=r(73400),h=r(19523),p=r(96664),f=r(85127),g=r(67294),x=r(60071),v=r(36930),m=r(41112),C=r(90177),w=r(30085),b=function(e,t){return e.rotate.rotation===t.rotate.rotation&&JSON.stringify(e.flip)===JSON.stringify(t.flip)&&JSON.stringify(e.rotate.initialData)===JSON.stringify(t.rotate.initialData)&&JSON.stringify(e.image)===JSON.stringify(t.image)&&JSON.stringify(e.crop.cropBox)===JSON.stringify(t.crop.cropBox)},y=function(){var e=(0,s.Z)(u().mark((function e(t,r,i,n,a){var o,c,s,l,d,f,g,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=document.createElement("canvas"),c=o.getContext("2d")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,h.p)(a);case 6:return s=e.sent,l=s.image,d=90===Math.abs(t)||270===Math.abs(t),f=(0,w.c)(l,i,n,d),g=f.width,x=f.height,d?(o.width=x,o.height=g,c.save(),c.clearRect(0,0,o.width,o.height),c.translate(o.width/2,o.height/2),c.rotate(t*Math.PI/180),c.translate(-o.height/2,-o.width/2),c.drawImage(l,0,0,g,x)):(o.width=g,o.height=x,c.save(),c.clearRect(0,0,o.width,o.height),c.translate(o.width/2,o.height/2),c.rotate(t*Math.PI/180),c.translate(-o.width/2,-o.height/2),c.drawImage(l,0,0,g,x)),c.restore(),r.width=o.width,r.height=o.height,e.next=16,(0,p.L)(o.toDataURL(),r);case 16:case"end":return e.stop()}}),e)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}(),j=r(85893),k=function(){var e=function(){var e=(0,C.CG)(m.F,b),t=e.image,r=e.rotate,i=r.rotation,n=r.straighten,a=r.initialData,o=e.flip,c=o.horizontal,l=o.vertical,h=e.crop.cropBox,w=(0,C.TL)(),j=(0,g.useContext)(d.F),k=j.rotateRef,N=j.parentImageRef,z=(0,v.y)(k).isLoaded,S=(0,g.useState)(""),R=S[0],L=S[1],O=(0,g.useMemo)((function(){return null!==N&&void 0!==N&&N.current&&N.current.getAttribute("src")||""}),[null===N||void 0===N?void 0:N.current,c,l]),V=(0,g.useMemo)((function(){return i}),[]),B=function(){var e=(0,s.Z)(u().mark((function e(r){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z&&null!==k&&void 0!==k&&k.current&&null!==N&&void 0!==N&&N.current&&t&&""===R){e.next=2;break}return e.abrupt("return");case 2:return L(r),e.next=5,(0,f._)();case 5:return n=(i+90*("clock-wise"===r?1:-1))%360,o=h?(n-h.rotation)%360:n,o-=V,null!==a&&void 0!==a&&a.rotation&&(o=(o-a.rotation)%360),e.next=12,y(o,k.current,t.containerWidth,t.containerHeight,O);case 12:return N.current.width=k.current.width,N.current.height=k.current.height,e.next=16,(0,p.L)(k.current.getAttribute("src")||"",N.current);case 16:return L(""),e.next=19,(0,f._)();case 19:w((0,x.is)(n)),w((0,x.Ym)({value:N.current.width/N.current.height})),w((0,x.Oz)());case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{rotation:i,straighten:n,handleStraightenChange:function(e){},handleDirection:B,rotatingState:R}}(),t=e.handleDirection,r=e.rotatingState;return(0,j.jsxs)("div",{className:"pt-8",children:[(0,j.jsx)(c.D,{title:(0,i.V)("rotate-image")}),(0,j.jsx)("div",{className:"flex flex-col w-full",children:(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4 my-8",children:[(0,j.jsxs)("div",{className:"w-full flex flex-col text-center gap-2",onClick:function(){return t("clock-wise")},"data-testid":"rotate-clockwise",children:[(0,j.jsx)("div",{children:(0,j.jsx)("div",{className:"dark:bg-darkSurface-200 cursor-pointer py-8 flex items-center justify-center border-slate-200 dark:border-darkSurface-400 border rounded-xl",children:"clock-wise"===r?(0,j.jsx)(n.a,{className:"stroke-[var(--dark-gray)]",height:34,width:34}):(0,j.jsx)(a.V,{})})}),(0,j.jsx)("div",{className:"capitalize",children:(0,j.jsx)(o.vN,{keyName:"clock-wise"})})]}),(0,j.jsxs)("div",{className:"w-full flex flex-col text-center gap-2",children:[(0,j.jsx)("div",{onClick:function(){return t("reverse-clock-wise")},"data-testid":"rotate-counter-clockwise",children:(0,j.jsx)("div",{className:"dark:bg-darkSurface-200 cursor-pointer py-8 flex items-center justify-center border-slate-200 dark:border-darkSurface-400 border rounded-xl flipped",children:"reverse-clock-wise"===r?(0,j.jsx)(n.a,{className:"stroke-[var(--dark-gray)]",height:34,width:34}):(0,j.jsx)(a.V,{})})}),(0,j.jsx)("div",{className:"capitalize whitespace-nowrap",children:(0,j.jsx)(o.vN,{keyName:"counter-clock-wise"})})]})]})})]})}},30085:function(e,t,r){r.d(t,{c:function(){return b},u:function(){return w}});var i=r(50029),n=r(87794),a=r.n(n),o=r(67294),c=r(73400),s=r(90177),l=r(58837),u=r(19523),d=r(60071),h=r(96517),p=r(44221),f=r(56726),g=r(93127),x=r(16560),v=r(96664),m=r(11163),C=r(98948),w=function(){var e,t,r,n,w,y,j=(0,s.CG)((function(e){return e.resizeEditor.currentType})),k=(0,s.CG)((function(e){return e.resizeEditor.image})),N=(0,o.useState)(!1),z=N[0],S=N[1],R=(0,s.TL)(),L=(0,m.useRouter)().locale,O=(0,o.useContext)(c.F),V=O.parentImageRef,B=O.resizeRef,M=O.cropRef,E=O.rotateRef,F=O.setImageLoaded,T=O.initialImageRef,P=(0,o.useContext)(l.Q).task,H=(0,o.useRef)(null),W=(0,g.Z)(null!==(e=null!==(t=null===k||void 0===k?void 0:k.src)&&void 0!==t?t:null===P||void 0===P||null===(r=P.result)||void 0===r||null===(n=r.url)||void 0===n?void 0:n.toString())&&void 0!==e?e:""),D=(0,o.useState)(!0),Z=D[0],I=D[1],A=(0,o.useState)(0),G=A[0],_=A[1],J=(0,o.useRef)(!1),U=function(){var e=(0,i.Z)(a().mark((function e(){var t,r,i,n,o,c,s,l,h,f,g,m,C,w,y,j,N;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===V||void 0===V?void 0:V.current,c=H.current,s=null===T||void 0===T?void 0:T.current,o&&!J.current&&c&&s){e.next=5;break}return e.abrupt("return");case 5:return J.current=!0,e.next=8,(0,p.G)(W,null!==(t=null===P||void 0===P||null===(r=P.result)||void 0===r?void 0:r.size)&&void 0!==t?t:0,_,{},(null===k||void 0===k?void 0:k.ext)||(0,x.v)(W));case 8:return l=e.sent,h=l.src,e.next=12,(0,u.p)(h);case 12:if(f=e.sent,g=f.image,m=f.width,C=f.height,!(w=f.error)||"completed"!==(null===P||void 0===P?void 0:P.status)){e.next=22;break}return S(!0),e.abrupt("return");case 22:if(!w){e.next=27;break}return e.next=25,Y();case 25:return window.location.href="/".concat("en"===L?"":L,"?errorFromEditor=true"),e.abrupt("return");case 27:return y=b(g,c.getBoundingClientRect().width,c.getBoundingClientRect().height,!1),j=y.width,N=y.height,o.width=j,o.height=N,e.next=32,(0,v.L)(h,o);case 32:return s.width=j,s.height=N,e.next=36,(0,v.L)(h,s);case 36:R((0,d.QL)({src:W,height:C,width:m,initialHeight:N,initialWidth:j,originalHeight:C,originalWidth:m,ratio:m/C,title:null!==(i=null===k||void 0===k?void 0:k.title)&&void 0!==i?i:"",containerWidth:c.getBoundingClientRect().width,containerHeight:c.getBoundingClientRect().height,ext:null!==(n=null===k||void 0===k?void 0:k.ext)&&void 0!==n?n:W.split(".")[W.split(".").length-1]})),R((0,d.yD)(C)),R((0,d.CT)(m)),I(!1),F(!0),K();case 42:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Y(){return X.apply(this,arguments)}function X(){return(X=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,C.Z.post("/api/tasks/".concat(P.id,"/cancel"));case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}var K=function(){(0,h.S)("event","Editor Loaded",{event_category:"Image Resizer",event_label:"Editor Page"})};return(0,o.useEffect)((function(){U()}),[H.current]),{previewContainerRef:H,parentImageRef:V,resizeRef:B,cropRef:M,rotateRef:E,currentType:j,showLoader:Z,loadedProgress:G,size:(0,f.t)(null!==(w=null===P||void 0===P||null===(y=P.result)||void 0===y?void 0:y.size)&&void 0!==w?w:0),initialImageRef:T,isUnsupportedImage:z}},b=function(e,t,r,i){var n=e.width,a=e.height;return i?(a>t&&(a=t,n=e.width/e.height*a),n>r&&(n=r,a=e.height/e.width*n)):(n>t&&(n=t,a=e.height/e.width*n),a>r&&(a=r,n=e.width/e.height*a)),{width:n,height:a}}},73400:function(e,t,r){r.d(t,{F:function(){return a},K:function(){return o}});var i=r(67294),n=r(85893),a=(0,i.createContext)({parentImageRef:null,resizeRef:null,cropRef:null,flipRef:null,rotateRef:null,initialImageRef:null,imageLoaded:!1,setImageLoaded:function(){}}),o=function(e){var t=e.children,r=(0,i.useRef)(null),o=(0,i.useRef)(null),c=(0,i.useRef)(null),s=(0,i.useRef)(null),l=(0,i.useRef)(null),u=(0,i.useRef)(null),d=(0,i.useState)(!1),h=d[0],p=d[1];return(0,n.jsx)(a.Provider,{value:{parentImageRef:r,resizeRef:o,cropRef:c,flipRef:s,rotateRef:l,imageLoaded:h,setImageLoaded:p,initialImageRef:u},children:t})}},58837:function(e,t,r){r.d(t,{Q:function(){return a},o:function(){return o}});var i=r(67294),n=r(85893),a=(0,i.createContext)({task:null}),o=function(e){var t=e.children,r=e.task;return(0,n.jsx)(a.Provider,{value:{task:r},children:t})}},96267:function(e,t,r){r.d(t,{N:function(){return n}});var i=r(67294),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=(0,i.useRef)(null),r=function(r){t.current&&clearTimeout(t.current),t.current=setTimeout(r,e)};return r}},71113:function(e,t,r){r.d(t,{bo:function(){return n},iZ:function(){return o},mc:function(){return c},wA:function(){return a}});var i=r(74805).B.actions,n=i.setPreview,a=(i.setSrc,i.setImageInfo),o=i.setOriginal,c=i.reset},36930:function(e,t,r){r.d(t,{y:function(){return l}});var i=r(50029),n=r(87794),a=r.n(n),o=r(73400),c=r(96664),s=r(67294),l=function(e){var t=(0,s.useContext)(o.F),r=t.parentImageRef,n=t.imageLoaded,l=(0,s.useState)(!1),u=l[0],d=l[1];function h(){return(h=(0,i.Z)(a().mark((function t(){var i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null===r||void 0===r?void 0:r.current,o=null===e||void 0===e?void 0:e.current,i&&o&&n){t.next=4;break}return t.abrupt("return");case 4:return o.width=i.width,o.height=i.height,t.next=8,(0,c.L)(i.getAttribute("src")||"",o);case 8:d(!0);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,s.useEffect)((function(){!function(){h.apply(this,arguments)}()}),[n]),{isLoaded:u}}},52494:function(e,t,r){r.d(t,{f:function(){return i}});var i=function(e,t,r,i){var n,a,o=t?t.width:null!==(n=null===e||void 0===e?void 0:e.originalWidth)&&void 0!==n?n:0,c=t?t.height:null!==(a=null===e||void 0===e?void 0:e.originalHeight)&&void 0!==a?a:0,s=Math.round(o*r/100),l=Math.round(c*r/100),u=90===Math.abs(i)||270===Math.abs(i);return{width:u?l:s,height:u?s:l}}},63041:function(e,t,r){r.d(t,{A:function(){return i}});var i=["freeform","original","custom","1:1","4:3","14:9","16:9","16:10","2:1","3:1","4:1","3:2","5:4","7:5","19:10","21:9","32:9","180:180","820:312","1200:900","1280:720","110:110","320:320","1080:1920","400:400","1500:1500","1024:512","1200:628","1200:675","800:800","2560:1440","5120:2880","1024:768","1280:800","1366:768","1440:900","1920:1080","3840:2160","2480:3508","1748:2480","1280:1748","2400:3300"]},99195:function(e,t,r){r.d(t,{c:function(){return i}});var i=function(e,t){return 0===t?0:e/t}},48984:function(e,t,r){r.d(t,{O:function(){return i}});var i=function(e){var t,r;return"freeform"===e?0:"original"===e?1:(null!==(t=+e.split(":")[0])&&void 0!==t?t:1)/(null!==(r=+e.split(":")[1])&&void 0!==r?r:1)}},81989:function(e,t,r){r.d(t,{r:function(){return s}});var i=r(59499),n=r(33129),a=r.n(n);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(e,t){var r=0,i=0,n=0,o=new(a())(e,c(c({},t),{},{cropend:function(){var e=o.getCropBoxData(),r=e.height,a=e.width,c=e.top,s=e.left;t.cropend&&t.cropend(a,r,c,s),i=a,n=r},crop:function(){var e=o.getCropBoxData(),i=e.height,n=e.width,a=e.top,c=e.left;r<1&&t.crop&&t.crop(n,i,a,c),r++},cropmove:function(){var e=o.getCropBoxData(),r=e.height,a=e.width,c=e.top,s=e.left;t.cropmove&&t.cropmove(a,r,c,s),i===a&&n===r?t.cropdrag&&t.cropdrag(c,s):t.cropresize&&t.cropresize(a,r,c,s)},ready:function(){t.ready&&t.ready(o);var e=o.getCropBoxData(),r=e.width,a=e.height;i=r,n=a}}));return{cropper:o}}},78408:function(e,t,r){r.d(t,{d:function(){return c}});var i=r(50029),n=r(87794),a=r.n(n),o=r(96664);function c(e,t,r,i,n,a){return s.apply(this,arguments)}function s(){return(s=(0,i.Z)(a().mark((function e(t,r,i,n,c,s){var l,u,d,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=document.createElement("canvas"),u=l.getContext("2d")){e.next=4;break}return e.abrupt("return");case 4:return d=window.devicePixelRatio,l.width=i.width*d,l.height=i.height*d,(h=new Image).src=n,h.style.transform="scale(-1, 1)",h.width=l.width,h.height=l.height,u.clearRect(0,0,l.width,l.height),e.next=15,new Promise((function(e){h.onload=function(){e()}}));case 15:return t&&(u.translate(c*d,0),u.scale(-1,1)),r&&(u.translate(0,s*d),u.scale(1,-1)),u.drawImage(h,0,0,l.width,l.height),e.next=20,(0,o.L)(l.toDataURL(),i);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},96664:function(e,t,r){r.d(t,{L:function(){return o}});var i=r(50029),n=r(87794),a=r.n(n),o=function(){var e=(0,i.Z)(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){r.src=t,r.onload=function(){e()},r.onerror=function(){i()}})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},85127:function(e,t,r){r.d(t,{_:function(){return o}});var i=r(50029),n=r(87794),a=r.n(n),o=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=setTimeout((function(){e(void 0),clearTimeout(r)}),null!==t&&void 0!==t?t:10)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=645-f2b803634bc9ed10.js.map